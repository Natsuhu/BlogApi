<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.natsu.blog.mapper.CommentMapper">

    <select id="getComments" resultType="com.natsu.blog.model.entity.Comment" >
        select
            id, nickname, email, content, avatar, create_time, ip, is_published, website, qq,
            is_admin_comment, page, reply_nickname, article_id, origin_id, parent_comment_id
        from
            comment
        <where>
            <if test="queryCond.page != null">
                and page = ${queryCond.page}
            </if>
            <if test="queryCond.articleId != null">
                and article_id = ${queryCond.articleId}
            </if>
            <if test="queryCond.isPublished != null">
                and is_published = ${queryCond.isPublished}
            </if>
            <if test="queryCond.parentCommentId != null">
                and parent_comment_id = ${queryCond.parentCommentId}
            </if>
            <if test="queryCond.keyword != null">
                and content like CONCAT('%',#{queryCond.keyword},'%')
            </if>
        </where>
        order by create_time desc
    </select>

</mapper>
